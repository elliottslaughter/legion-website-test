<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Hello World &#8211; Legion Programming System</title>
<meta name="description" content="">

<meta name="keywords" content="">


<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Hello World">
<meta property="og:description" content="Home page for the Legion parallel programming system">
<meta property="og:url" content="/legion-website-test/tutorial/hello_world.html">
<meta property="og:site_name" content="Legion Programming System">





<link rel="canonical" href="/legion-website-test/tutorial/hello_world.html">
<link href="/legion-website-test/feed.xml" type="application/atom+xml" rel="alternate" title="Legion Programming System Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="/legion-website-test/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="/legion-website-test/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/legion-website-test/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<link rel="icon" sizes="16x16" href="/legion-website-test/images/favicon/favicon-16x16.png">
<link rel="icon" sizes="32x32" href="/legion-website-test/images/favicon/favicon-32x32.png">
<link rel="icon" sizes="48x48" href="/legion-website-test/images/favicon/favicon-48x48.png">
<link rel="icon" sizes="96x96" href="/legion-website-test/images/favicon/favicon-96x96.png">
<link rel="icon" sizes="144x144" href="/legion-website-test/images/favicon/favicon-144x144.png">
<link rel="icon" sizes="192x192" href="/legion-website-test/images/favicon/favicon-192x192.png">
<link rel="apple-touch-icon" sizes="57x57" href="/legion-website-test/images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/legion-website-test/images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/legion-website-test/images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/legion-website-test/images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/legion-website-test/images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/legion-website-test/images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/legion-website-test/images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/legion-website-test/images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/legion-website-test/images/favicon/apple-icon-180x180.png">
<link rel="apple-touch-icon-precomposed" sizes="192x192" href="/legion-website-test/images/favicon/apple-icon-precomposed.png">
<meta name="msapplication-config" content="/legion-website-test/images/favicon/browserconfig.xml" />
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<link rel="manifest" href="/legion-website-test/images/favicon/manifest.json">

</head>

<body class="page" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="/legion-website-test/">Legion Programming System</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="/legion-website-test/overview/" >Overview</a></li>
		        
				<li><a href="/legion-website-test/starting/" >Getting Started</a></li>
		        
				<li><a href="/legion-website-test/tutorial/" >Tutorials</a></li>
		        
				<li><a href="/legion-website-test/events/" >Events</a></li>
		        
				<li><a href="/legion-website-test/documentation/" >Documentation</a></li>
		        
				<li><a href="/legion-website-test/publications/" >Publications</a></li>
		        
				<li><a href="/legion-website-test/resources/" >Resources</a></li>
		        
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->




<div id="main" role="main"  itemprop="mainContentOfPage">
  <div class="article-author-side">
    <a href="https://www.stanford.edu/"><img src="/legion-website-test/images/logos/stanford.png" class="bio-photo" alt="Stanford University logo"></a>
<a href="https://www6.slac.stanford.edu/"><img src="/legion-website-test/images/logos/slac.jpg" class="bio-photo" alt="SLAC National Accelerator Laboratory logo"></a>
<a href="https://www.lanl.gov/"><img src="/legion-website-test/images/logos/los-alamos.png" class="bio-photo" alt="Los Alamos National Laboratory logo"></a>
<a href="https://www.nvidia.com/"><img src="/legion-website-test/images/logos/nvidia.png" class="bio-photo" alt="NVIDIA logo"></a>
<a href="https://www.rdworldonline.com/rd-100-award-winners-announced-in-analytical-test-it-electrical-categories/"><img src="/legion-website-test/images/logos/rd100.png" class="bio-photo" alt="Winner of the R&D 100 Award"></a>

<h3>Legion</h3>
<p>High Productivity High Performance Computing</p>





<a href="http://github.com/StanfordLegion/legion" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>



  </div>
  <article itemscope itemtype="http://schema.org/CreativeWork">
    <h1 itemprop="name">Hello World</h1>
    <div class="article-wrap" itemprop="text">
      <p>No tutorial would be complete without a Hello World example. 
Below is the source code for writing Hello World using
the Legion C++ runtime interface. The source code can also
be found in the <code class="language-plaintext highlighter-rouge">tutorial</code> directory of the repository, along
with a <code class="language-plaintext highlighter-rouge">Makefile</code> for building and running the application. 
By walking through these tutorial programs in detail we
will demonstrate how to use the Legion C++ runtime API.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="code"><pre><span class="cp">#include</span> <span class="cpf">&lt;cstdio&gt;</span><span class="cp">
#include</span> <span class="cpf">"legion.h"</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">Legion</span><span class="p">;</span>

<span class="k">enum</span> <span class="n">TaskID</span> <span class="p">{</span>
  <span class="n">HELLO_WORLD_ID</span><span class="p">,</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">hello_world_task</span><span class="p">(</span><span class="k">const</span> <span class="n">Task</span> <span class="o">*</span><span class="n">task</span><span class="p">,</span>
                      <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">PhysicalRegion</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">regions</span><span class="p">,</span>
                      <span class="n">Context</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">Runtime</span> <span class="o">*</span><span class="n">runtime</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">"Hello World!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">Runtime</span><span class="o">::</span><span class="n">set_top_level_task_id</span><span class="p">(</span><span class="n">HELLO_WORLD_ID</span><span class="p">);</span>

  <span class="p">{</span>
    <span class="n">TaskVariantRegistrar</span> <span class="n">registrar</span><span class="p">(</span><span class="n">HELLO_WORLD_ID</span><span class="p">,</span> <span class="s">"hello_world variant"</span><span class="p">);</span>
    <span class="n">registrar</span><span class="p">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">ProcessorConstraint</span><span class="p">(</span><span class="n">Processor</span><span class="o">::</span><span class="n">LOC_PROC</span><span class="p">));</span>
    <span class="n">Runtime</span><span class="o">::</span><span class="n">preregister_task_variant</span><span class="o">&lt;</span><span class="n">hello_world_task</span><span class="o">&gt;</span><span class="p">(</span><span class="n">registrar</span><span class="p">,</span> <span class="s">"hello_world task"</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="n">Runtime</span><span class="o">::</span><span class="n">start</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></figure>

<h4 id="legion-namespaces">Legion Namespaces</h4>

<p>All Legion programs begin by including the <code class="language-plaintext highlighter-rouge">legion.h</code> header 
file (line 2). This file includes the entire Legion C++ runtime 
API.  Line 4 imports the <code class="language-plaintext highlighter-rouge">Legion</code>
namespace into the current program making most of the necessary
types for writing Legion programs available.  There are other
Legion runtime namespaces that we will encounter in later examples.
Detailed documentation for Legion runtime namespaces can be
found <a href="/legion-website-test/doxygen/annotated.html">here</a>.</p>

<h4 id="registering-legion-tasks">Registering Legion Tasks</h4>

<p>On lines 6-8 we define an enumeration for storing the IDs that
we will direct the Legion runtime to associate with each task.  In this example
we only need a single ID which we will associate with our ‘Hello World’ task.
Lines 21-23 show how to register 
a Legion task with a <code class="language-plaintext highlighter-rouge">void</code> return type with the Legion runtime.
In the <a href="/legion-website-test/tutorial/tasks_and_futures.html">next example</a> we’ll see how
to register tasks with non-void return types.  The static method 
<code class="language-plaintext highlighter-rouge">preregister_task_variant</code> on the <code class="language-plaintext highlighter-rouge">Runtime</code> class
is templated on the function pointer to
be called to run the task (allowing the API to handle polymorphic return
types elegantly).  In this case it is templated on the function pointer to 
the <code class="language-plaintext highlighter-rouge">hello_world_task</code> on lines 10-14.  Note that all Legion tasks must have 
the same function type (with the exception of different return types). 
We’ll look in detail at the arguments passed to Legion tasks in later 
examples.  The <code class="language-plaintext highlighter-rouge">preregister_task_variant</code> call takes several parameters:</p>

<ul>
  <li>Task registrar - this object describes the task to be registered</li>
  <li>Task name - a human-readable string naming the task</li>
</ul>

<p>The task registrar itself records the ID of the task, a variant name
and the constraints that apply to the variant (we cover the distinction
between tasks and variants more in the <a href="/legion-website-test/tutorial/tasks_and_futures.html">next tutorial</a> ).
In this case, the variant is constrained to run on a CPU
processor (LOC, or <em>latency optimized core</em>).</p>

<p>There are additional parameters that can be passed to <code class="language-plaintext highlighter-rouge">preregister_task_variant</code>
call as can be seen in the <a href="/doxygen/class_legion_1_1_runtime.html#a5e85dd4405daabc5eb4ebf3621763eb7">documentation</a>.
We’ll examine some of these additional parameters in later examples.</p>

<p>All Legion programs begin with a <em>top-level</em> task which starts off
a Legion program.  The Legion runtime must be told which task to 
use as the top-level task using the <code class="language-plaintext highlighter-rouge">set_top_level_task_id</code> static 
method.  Line 17 invokes this method to register the ID we associate
with the <code class="language-plaintext highlighter-rouge">hello_world_task</code> as being the ID of the top-level task.</p>

<h4 id="legion-runtime-start-up">Legion Runtime Start-Up</h4>

<p>When writing Legion programs, all the static member function 
invocations on the <code class="language-plaintext highlighter-rouge">Runtime</code> class must be performed
before the static method <code class="language-plaintext highlighter-rouge">start</code> is called.  It is imperative that 
this standard be followed for all Legion programs to ensure that 
they operate properly when running as MPI or GASNet programs. Legion
also supports dynamic registrations of task variants using the
<code class="language-plaintext highlighter-rouge">register_task_variant</code> method after the <code class="language-plaintext highlighter-rouge">start</code> method is called
for programs that dynamically generate JIT-compiled tasks such
as ones built on <a href="http://terralang.org">Terra</a>. After the runtime 
has been setup to run, the program
invokes the <code class="language-plaintext highlighter-rouge">start</code> static method on the <code class="language-plaintext highlighter-rouge">Runtime</code> class.
This call starts the Legion runtime and only returns an error code
if a problem is encountered during execution.</p>

<p>After <code class="language-plaintext highlighter-rouge">start</code> is called, the Legion runtime will perform any necessary
setup operations and will then invoke the top-level task.  In this
program the top-level task prints “Hello World” and then returns.  After
the top-level task completes, the Legion runtime will tear itself down
(abiding by GASNet or MPI conventions when necessary) and exit.</p>

<p>Next Example: <a href="/legion-website-test/tutorial/tasks_and_futures.html">Tasks and Futures</a></p>

    </div><!-- /.article-wrap -->
  </article>
</div><!-- /#index -->

<div class="footer-wrap">
  <footer>
    <span>&copy; 2023 Legion. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/legion-website-test/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/legion-website-test/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-20524102-3']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

          

</body>
</html>
